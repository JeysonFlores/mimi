(globalThis["webpackChunk_canva_web"] = globalThis["webpackChunk_canva_web"] || []).push([[43432],{

/***/ 290120:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(258551);globalThis._5f74ec40302898c5a55451c9fbd04240 = globalThis._5f74ec40302898c5a55451c9fbd04240 || {};(function(__c) {var w0=__c.w0;var L=__c.L;
var LMc=async function(a,b){return a.Gta(b,async()=>{if(a.LYa==null)throw Error("Scene document resources are not supported");const c=await a.LYa.wr({id:b,version:1},void 0),d={id:c.id,files:{I0a:c.content.url,v$a:c.Qc?.url}};(0,__c.Yb)(()=>{a.scenes.set(d.id,d)});return d})},OMc=function(a,b){if(a.fi.Lib&&b instanceof MMc)return new NMc(a.fi.Lib,b);throw Error("GltfResource needs GltfResource");},QMc=function(a){return PMc?new MMc(a):new MMc(a,{environment_sdr:"https://smartmockups-web-assets.s3.us-east-1.amazonaws.com/default_octahedral_packed_sdr.png",environment_gain:"https://smartmockups-web-assets.s3.us-east-1.amazonaws.com/default_octahedral_packed_gain.png"})},
RMc=function(a,b,c){let d=b-1,e=0,f=c-1,g=0;for(let h=0;h<c;h++)for(let k=0;k<b;k++)a[3+(h*b+k)*4]!==0&&(d=Math.min(d,k),e=Math.max(e,k),f=Math.min(f,h),g=Math.max(g,h));a=g-f+1;return{left:d,top:c-(f+a),width:e-d+1,height:a}},SMc=function(a,b,c){const d=a.store.QE?a.fi.canvas:a.store.DE;if(d){var e=c.getContext("2d");if(!e)throw Error("Unable to create 2d context");a.store.QE&&a.render(!1);c.width=b;c.height=b;e.drawImage(d,0,0,b,b)}},TMc=function(a,b){a.store.container=b;b.contains(a.fi.canvas)||
b.appendChild(a.fi.canvas)},UMc=function(a){if(a.store.Je){const b=requestAnimationFrame(()=>UMc(a));a.store.Ufa=b;a.render(a.store.mZa)}},XMc=function({Ika:a,fi:b}){const c=new VMc;return new WMc(c,a,b)},YMc=function(a){var b=__c.z(a.store.container,"Missing container"),c=a.kg.UZ;b.style.width=2E3*a.kg.da+"px";b.style.height=2E3*a.kg.da+"px";b.style.left=`-${c.left*a.kg.da}px`;b.style.top=`-${c.top*a.kg.da}px`;b.style.position="absolute";c=new Image;{var d=a.kg;b=a.w_(b);const e=d.store.QE?d.fi.canvas:
d.store.DE;e?(d.store.QE&&(O7(d.fi,b,b),d.render(!1)),d=e.toDataURL("image/png")):d=""}c.src=d;a.store.eN=c},$Mc=function(a){var b=__c.z(a.store.container,"Missing container");b.style.position="init";b.style.left="0";b.style.top="0";b.style.width="100%";b.style.height="100%";const c=document.createElement("canvas");var d=a.kg;b=a.w_(b);if(d.store.isInitialized){var e=c.getContext("2d");if(!e)throw Error("Unable to create 2d context");var f=b/2E3,g=d.G8();c.width=f*g.width;c.height=f*g.height;const h=
ZMc(d.fi);O7(d.fi,b,b);d.render(!1);e.drawImage(d.fi.canvas,g.left*f,g.top*f,g.width*f,g.height*f,0,0,g.width*f,g.height*f);O7(d.fi,h.width,h.height)}else if(d.store.DE){e=c.getContext("2d");if(!e)throw Error("Unable to create 2d context");f=d.store.vga;g=d.store.AS/2E3;b/=2E3;c.width=Math.round(b*f.width);c.height=Math.round(b*f.height);e.drawImage(d.store.DE,f.left*g,f.top*g,f.width*g,f.height*g,0,0,c.width,c.height)}d=new Image;d.src=c.toDataURL("image/png");a.store.eN=d;c.width=1;c.height=1},
aNc=function(a){const b=a.Um;a=__c.dO.create({...__c.RD,image:{...__c.lEb,media:{...__c.AEb,id:a.pJ,version:1},yb:void 0}});return P7(b,{fill:a})},cNc=function({nkb:a,hlb:b,clb:c,Xha:d,zAb:e,Um:f,xra:g}){switch(d){case 1:return P7(c,{});case 3:return P7(bNc,{N9:e||""});case 0:return P7(b,{});case 2:return P7(aNc,{Um:f,pJ:g||""});case 4:return P7(a,{});default:throw new __c.A(d);}},jNc=function({Pq:a,ff:b,Um:c,Vz:d,fi:e,lqa:f,xia:g}){const h=new dNc,k=new eNc(h,a,b,d,e,f,g),l=fNc(a),m=gNc(a),n=()=>
P7("div",{children:"Error"});return hNc(()=>{Q7(()=>{k.initialize();return()=>{k.destroy()}},[]);return P7(iNc,{Ed:k.Ed,children:P7(cNc,{Xha:k.Xha,zAb:k.N9,selected:k.Fi,xra:k.xra,Um:c,clb:m,hlb:l,nkb:n})})})},mNc=function(a){return kNc(({data:b,ue:{Um:c},ji:{ff:d}})=>{const e=lNc(()=>jNc({Pq:b,ff:d,Um:c,...a}),[b,d,c]);return P7("div",{className:"N73IPQ",children:P7(e,{})})})},oNc=function(a,b,c){a=a.startSpan("load_resource",c);return nNc(a,b)},nNc=function(a,b){return(typeof b==="function"?b():
b).catch(c=>{a.setStatus("error");throw c;}).finally(()=>{a.end()})},O7=function(a,b,c){a.canvas.width=b;a.canvas.height=c},pNc=function(a,b){a.Cba=a.Cba.filter(c=>c!==b)},ZMc=function(a){return{width:a.canvas.width,height:a.canvas.height}},rNc=async function(a){a.iX||(a.iX=R7());try{const [{default:b,WebGlRenderer:c},{default:d}]=await Promise.all([__webpack_require__.me(19779),__webpack_require__.me(104993)]);await b({path:d});a.QQa=c;a.FQ=qNc(a)}catch(b){throw a.X4=void 0,a.J.Ob("Failed to create WebGL renderer"),
Error("Failed to create WebGL renderer");}},R7=function(){const a=document.createElement("canvas");a.width=1E3;a.height=1E3;a.style.width="100%";a.style.visibility="visible";return a},qNc=function(a,b=0){if(b>5)throw Error("Unable to recreate context");const c=sNc(a);a.FQ=new (__c.z(a.QQa))(c);a.FQ.onContextLost=()=>{a.J.info("WebGL context lost for scene widget");a.FQ=void 0;a.X4=void 0;a.nGa=()=>{const d=a.canvas;a.iX=R7();a.QQa&&qNc(a,b+1);a.Cba.forEach(e=>e(d));a.nGa=void 0}};return a.FQ},sNc=
function(a){const b=a.canvas.getContext("webgl");if(b!=null)return b;a.J.Ob("Failed to get WebGL context for scene widget");throw Error("Failed to get WebGL context for scene widget");};
__c.Rq.prototype.Gta=__c.ea(7,function(a,b){const c=this.zi.get(__c.Pq(a));if(c!=null&&c.Hab!=null){const e=this.$X.get(c);if(e!=null)return Promise.resolve({...c,element:e})}const d=__c.Pq(a);if(a=this.pending.get(d))return a;c!=null&&c.Hab!=null&&(b=async()=>{const e=await __c.Qq(this,c);return{...c,element:e}});b=b().finally(()=>this.pending.delete(d));this.pending.set(d,b);return b});
__c.ns.prototype.Gta=__c.ea(6,function(a,b){var c=this.scenes.get(a);if(c)return Promise.resolve(c);if(c=this.pending.get(a))return c;b=b().finally(()=>this.pending.delete(a));this.pending.set(a,b);return b});var tNc=__webpack_require__(19779),NMc=tNc.GltfRenderer,MMc=tNc.GltfResource;var S7=__webpack_require__(186901),T7=S7.EW,uNc=S7.h5,U7=S7.mJ,V7=S7.sH,W7=S7.XI;var vNc=__webpack_require__(322594),P7=vNc.jsx,wNc=vNc.jsxs;var X7=__webpack_require__(205482),kNc=X7.memo,Q7=X7.useEffect,lNc=X7.useMemo,xNc=X7.useRef,yNc=X7.useState;var hNc=__webpack_require__(721226).PA;var PMc=__c.wc("1aab289f",!1),zNc=class{constructor(a){this.fi=a}};var ANc=class{static D(a){L(a,{selected:V7.ref,hta:V7.ref,gta:V7.ref,yla:V7.ref,cCb:V7.ref})}constructor(a){this.kg=a;this.selected=(ANc.D(this),!1);this.gta=this.hta=!1;this.yla=0;this.cCb=!1}};var WMc=class{static D(a){L(a,{initialize:W7,vvb:W7,TMa:W7,odb:W7,dispose:W7,G8:W7,Tka:W7,Feb:W7})}async initialize(a){this.store.isInitialized||this.store.Ed||(this.store.Ed=!0,a=QMc(a),this.store.Jka=a,await a.load(),a===this.store.Jka&&(this.store.QE=OMc(this.Ika,a),this.fi.Cba.push(this.Tka),this.render(!0),uNc(()=>{this.store.isInitialized=!0;this.store.Ed=!1})))}vvb(a,b,c=!0){const d=this.G8();this.store.UZ=d;a=Math.round(Math.min(a.width*2E3/d.width,2E3));O7(this.fi,a,a);this.store.AS=a;this.store.da=
b;this.store.mZa=c;this.Feb()}get AS(){return this.store.AS}get UZ(){return this.store.UZ}TMa(){this.store.Je=!1;this.store.Ufa!=null&&(cancelAnimationFrame(this.store.Ufa),this.store.Ufa=void 0)}odb(a){this.store.RR=a}async dispose(){this.TMa();if(this.isInitialized&&this.store.container?.contains(this.fi.canvas)){this.store.vga=this.G8();var a=document.createElement("canvas");SMc(this,this.store.AS,a);this.store.DE=a}this.store.QE?.dispose();this.store.QE=void 0;this.store.isInitialized=!1;pNc(this.fi,
this.Tka);this.store.Ed=!1;a=this.store.Jka;this.store.Jka=void 0;await a?.load();a?.dispose()}G8(){if(this.store.wga&&this.store.RR===this.store.wga?.YJb)return this.store.wga.la;var a=ZMc(this.fi);O7(this.fi,2E3,2E3);this.render(!1);const b=this.fi.getImageData();O7(this.fi,a.width,a.height);a=this.rxb(b.data,b.width,b.height);this.store.wga={YJb:this.store.RR,la:a};return a}get isInitialized(){return this.store.isInitialized}get Ed(){return this.store.Ed}get Je(){return this.store.Je}get da(){return this.store.da}Feb(){this.TMa();
this.store.Je=!0;UMc(this)}render(a){this.store.QE?.render({distance:1,rotationPhi:this.store.RR.rotation.x,rotationTheta:this.store.RR.rotation.y,enableGrid:a})}constructor(a,b,c,d=RMc){this.store=a;this.Ika=b;this.fi=c;this.rxb=d;this.Tka=(WMc.D(this),e=>{uNc(()=>{const f=this.store.Jka,g=this.store.container;g&&this.store.isInitialized&&f&&(g.contains(e)&&g.removeChild(e),TMc(this,g),this.store.QE?.dispose(),this.store.QE=void 0,this.store.QE=OMc(this.Ika,f),this.fi.Cba.push(this.Tka),this.store.isInitialized=
!0)})})}};var VMc=class{static D(a){L(a,{Je:V7.ref,RR:V7.ref,Ufa:V7.ref,DE:V7.ref,vga:V7.ref,wga:V7.ref,isInitialized:V7.ref,Ed:V7.ref,da:V7.ref,UZ:V7.ref})}constructor(){this.container=(VMc.D(this),void 0);this.mZa=this.Je=!1;this.RR={rotation:{x:0,y:0,z:0}};this.vga={left:0,top:0,width:1,height:1};this.Ed=this.isInitialized=!1;this.da=1;this.UZ={left:0,top:0,width:1,height:1};this.AS=0}};var BNc=({LBb:a})=>wNc("div",{className:"Wfem7A",children:[P7("div",{className:"CSoSRg"}),P7("div",{className:"__J59g",style:{width:a?"300%":"init",height:a?"init":"300%",aspectRatio:"1"},children:P7("div",{className:"tEhdig"})})]}),iNc=({children:a,Ed:b})=>{const c=xNc(null),[d,e]=yNc(!1);Q7(()=>{c.current&&e(c.current.clientWidth>=c.current.clientHeight)},[c]);return b?P7("div",{ref:c,className:"uDEnGQ",children:wNc("div",{className:"E8BDLQ",children:[P7("div",{className:"II7r4Q",children:a}),P7(BNc,
{LBb:d})]})}):a};var CNc=({XGb:a,WGb:b})=>{const c=xNc(null);Q7(()=>{const d=c.current;c.current&&a(c.current);return()=>{d&&b()}},[c,a,b]);return P7("div",{ref:c,style:{display:"block",position:"absolute"}})};var DNc=class{get kg(){return this.local.kg}constructor(a){this.local=a;this.Syb=b=>{const c=this.kg.UZ;b.style.width=2E3*this.kg.da+"px";b.style.height=2E3*this.kg.da+"px";b.style.left=`-${c.left*this.kg.da}px`;b.style.top=`-${c.top*this.kg.da}px`;TMc(this.kg,b)};this.Ryb=()=>{var b=this.kg;if(b.isInitialized&&b.store.container?.contains(b.fi.canvas)){b.store.vga=b.G8();const c=document.createElement("canvas");SMc(b,b.store.AS,c);b.store.DE=c}b.store.container?.removeChild(b.fi.canvas);b.store.container=
void 0}}};var gNc=({local:a})=>{const b=new DNc(a);return()=>P7(CNc,{XGb:b.Syb,WGb:b.Ryb})};var ENc=({eN:a,wHb:b,onDispose:c})=>{const d=xNc(null);Q7(()=>{d.current&&b(d.current);return()=>c()},[d,b,c]);Q7(()=>{d.current&&a&&(a.style.width="100%",a.style.height="100%",d.current.firstChild&&d.current.removeChild(d.current.firstChild),d.current.appendChild(a))},[d,a]);return P7("div",{ref:d,style:{width:"100%",height:"100%"}})};var FNc=__c.wc("75810be2",!1),GNc=class{static D(a){L(a,{initialize:W7.bound,dispose:W7.bound,zYa:W7})}initialize(a){FNc||(this.store.container=a,this.store.AYa=U7(()=>[this.kg.store.RR,this.kg.Je],this.Vyb,{fireImmediately:!1}),this.store.xYa=U7(()=>this.local.gta,this.Tyb,{fireImmediately:!0}))}dispose(){this.zYa();this.store.AYa?.();this.store.AYa=void 0;this.store.xYa?.();this.store.xYa=void 0}get eN(){return this.store.eN}w_(a){a=a.getBoundingClientRect();return Math.max(a.width,a.height)>100?
this.kg.AS:300}get kg(){return this.local.kg}zYa(){this.store.eN=void 0}constructor(a,b){this.store=a;this.local=b;this.Vyb=(GNc.D(this),()=>{this.kg.Je||(this.local.gta?YMc(this):$Mc(this))});this.Tyb=()=>{this.local.gta?YMc(this):$Mc(this)}}};var HNc=class{static D(a){L(a,{eN:V7.ref})}constructor(){this.container=(HNc.D(this),void 0)}};var fNc=({local:a})=>{const b=new HNc,c=new GNc(b,a);return hNc(()=>P7(ENc,{wHb:c.initialize,onDispose:c.dispose,eN:c.eN}))};var bNc=({N9:a})=>P7("img",{src:a,style:{maxWidth:"100%",maxHeight:"100%",width:"auto",height:"auto"}});var eNc=class{static D(a){L(a,{initialize:W7,destroy:W7,Xha:T7,Ed:T7,N9:T7,Fi:T7,$0a:W7})}async initialize(){this.RI&&(this.Pq.local.yla++,this.store.ltb=U7(()=>({selected:this.Fi,scene:this.store.scene}),({selected:b,scene:c})=>this.$0a(b,c),{fireImmediately:!0}),this.store.BYa=U7(()=>[this.Pq.G.config.ref.rotationPhi,this.Pq.G.config.ref.rotationTheta],this.Zyb,{fireImmediately:!0}),this.store.mtb=U7(()=>[this.Pq.local.hta],this.fzb,{fireImmediately:!1}));const a=await LMc(this.Vz,this.Pq.G.scene.id);
uNc(()=>{this.store.scene=a})}destroy(){this.RI&&this.Pq.local.yla--;this.Pq.local.yla===0&&this.kg.dispose();this.store.ltb?.();this.store.BYa?.();this.store.mtb?.()}get Xha(){return this.aFa&&this.RI&&!this.kg.Je||this.RI&&this.aFa&&!this.Fi||!this.RI&&this.aFa?0:this.NBb&&this.kg.Je?1:this.xra?2:this.N9?3:4}get Ed(){return this.RI&&this.Fi&&!this.kg.isInitialized}get N9(){return this.store.scene?.files.v$a}get aFa(){return this.Pq.local.hta}get xra(){return this.Pq.G.config.ref.snapshot?.id}get RI(){return!this.xia&&
this.ff===30}get Fi(){return this.Pq.local.selected}get NBb(){return this.RI&&this.Fi&&this.kg.isInitialized}get kg(){return this.Pq.local.kg}get G(){return this.Pq.G}constructor(a,b,c,d,e,f,g){this.store=a;this.Pq=b;this.ff=c;this.Vz=d;this.fi=e;this.lqa=f;this.xia=g;this.fzb=(eNc.D(this),()=>{if(!this.Pq.local.hta){var h=this.kg;h.store.DE&&(h.store.DE.width=1,h.store.DE.height=1,h.store.DE=void 0)}});this.$0a=async(h,k)=>{if(k!=null)if(!h)this.kg.dispose();else if(!this.kg.Ed){var l=__c.z(k.files.I0a);
await this.fi.eUb;h=this.lqa.startSpan("select");await oNc(this.lqa,async()=>{await this.kg.initialize(l)},h);h.end()}};this.Zyb=()=>{this.kg.Je||this.kg.odb({rotation:{x:this.Pq.G.config.ref.rotationPhi,y:this.Pq.G.config.ref.rotationTheta,z:0}})}}};var dNc=class{static D(a){L(a,{scene:V7.ref})}constructor(){this.BYa=(dNc.D(this),void 0)}};var INc=class{startSpan(a,b){a=`scene.${a}`;return b?this.bb.startSpan(a,b):this.bb.Nh(a,{wp:{name:`editor.${a}`,performance:{xJ:!0}}})}constructor(a){this.bb=a}};var JNc=navigator!=null&&!!navigator.userAgent.match(/iphone|ipad/gi),KNc=class{get eUb(){this.nGa&&this.nGa();this.X4||(this.X4=rNc(this));return this.X4}get canvas(){this.iX||(this.iX=R7());return this.iX}get Lib(){return this.FQ}getImageData(){__c.x(this.FQ!=null,"WebGlRenderer is not initialized");return this.FQ.readPixels()}constructor(a){this.J=a;this.Cba=[];JNc||(this.iX=R7(),this.X4=rNc(this))}};var LNc=__c.y_()(()=>({TZb(a,b,c){return{data:{G:{scene:{type:"scene",id:a,version:0},config:{snapshot:void 0,rotationPhi:6.02138592,rotationTheta:.08726646}},document:{}},S:{width:b,height:c}}},UZb(a,b,c,d){return{data:{G:{scene:{type:"scene",id:a,version:0},config:{snapshot:b,rotationPhi:6.02138592,rotationTheta:.08726646}},document:{}},S:{width:c,height:d}}}}));var MNc=__c.J_({G:__c.I_({scene:w0.Cm(1,"SceneRef"),config:w0.$wa(2,{snapshot:w0.wIb(1,"MediaRef"),rotationPhi:w0.NYa(2,{min:0,max:6.284}),rotationTheta:w0.NYa(3,{min:-1.571,max:1.571})})})});var NNc;NNc=__c.k_()(({ei:a,BR:b})=>{var c=b.bb;b=b.J.Xf("scene_widget_rendering");c=new INc(c);const d=new KNc(b),e=new zNc(d);b=navigator!=null&&!!navigator.userAgent.match(/iphone|ipad/gi);a=mNc({Vz:a.Vz,fi:d,lqa:c,xia:b});return{metadata:{type:"scene",name:__c.K("6XoKOg"),PV:f=>f.scene.id},K6:()=>{const f=XMc({Ika:e,fi:d});return new ANc(f)},G:__c.j_(a),exports:{xia:b}}});__c.N_={};__c.N_.HWb=ANc;__c.N_.nh=LNc;__c.N_.Go=NNc;__c.N_.oh=MNc;
}).call(globalThis, globalThis._5f74ec40302898c5a55451c9fbd04240);}

}])
//# sourceMappingURL=sourcemaps/d8ddf69a1f6d072e.js.map